### 网页初始化
  配置config.py, 运行app.py

### 一、基础接口
| 路径 | 方法 | 功能描述 | 请求参数 | 响应 | 备注 |
|------|------|----------|----------|------|------|
| `/` | GET | 系统首页 | 无 | 渲染首页HTML（根据登录状态显示不同内容） | 无需登录 |


### 二、用户认证接口（`/auth`）
| 路径 | 方法 | 功能描述 | 请求参数 | 响应 | 备注 |
|------|------|----------|----------|------|------|
| `/auth/register` | GET | 访问注册页面 | 无 | 渲染注册表单HTML | 无需登录 |
| `/auth/register` | POST | 用户注册 | 表单参数：<br>- `username`：用户名（必填）<br>- `password`：密码（必填） | 注册成功跳转至登录页；失败返回带错误信息的注册页 | 用户名不可重复 |
| `/auth/login` | GET | 访问登录页面 | 无 | 渲染登录表单HTML | 无需登录 |
| `/auth/login` | POST | 用户登录 | 表单参数：<br>- `username`：用户名（必填）<br>- `password`：密码（必填） | 登录成功跳转至首页；失败返回带错误信息的登录页 | 登录状态通过session维持 |
| `/auth/logout` | GET | 用户登出 | 无 | 清除session，跳转至首页 | 需登录 |


### 三、基座管理接口（`/bases`）
| 路径 | 方法 | 功能描述 | 请求参数 | 响应 | 备注 |
|------|------|----------|----------|------|------|
| `/bases` | GET | 查看基座列表 | 无 | 渲染当前用户的基座列表HTML | 需登录（仅显示当前用户数据） |
| `/bases/<int:id>` | GET | 查看基座详情 | 路径参数：<br>- `id`：基座ID | 渲染基座详情HTML（含名称、信息）；无权限则跳转至列表页 | 需登录（仅允许查看自己的基座） |
| `/bases/add` | GET | 访问添加基座页面 | 无 | 渲染添加基座表单HTML | 需登录 |
| `/bases/add` | POST | 添加基座 | 表单参数：<br>- `base_name`：基座名称（必填）<br>- `info`：基座详细信息（必填，多行文本） | 添加成功跳转至列表页；失败返回带错误信息的表单页 | 需登录，名称不可重复（同用户内） |
| `/bases/<int:id>/edit` | GET | 访问编辑基座页面 | 路径参数：<br>- `id`：基座ID | 渲染编辑表单（含当前数据）；无权限则跳转至列表页 | 需登录（仅允许编辑自己的基座） |
| `/bases/<int:id>/edit` | POST | 编辑基座 | 路径参数：<br>- `id`：基座ID<br>表单参数：<br>- `base_name`：新名称（必填）<br>- `info`：新信息（必填，多行文本） | 编辑成功跳转至详情页；失败返回带错误信息的表单页 | 需登录，名称不可重复（同用户内，排除自身） |
| `/bases/<int:id>/delete` | GET | 删除基座 | 路径参数：<br>- `id`：基座ID | 删除后跳转至列表页 | 需登录（仅允许删除自己的基座） |


### 四、星座管理接口（`/constellations`）
| 路径 | 方法 | 功能描述 | 请求参数 | 响应 | 备注 |
|------|------|----------|----------|------|------|
| `/constellations` | GET | 查看星座列表 | 无 | 渲染当前用户的星座列表HTML | 需登录（仅显示当前用户数据） |
| `/constellations/<int:id>` | GET | 查看星座详情 | 路径参数：<br>- `id`：星座ID<br>查询参数：<br>- `page`：页码（默认1） | 渲染星座详情（含卫星列表，分页展示） | 需登录（仅允许查看自己的星座） |
| `/constellations/add` | GET | 访问添加星座页面 | 无 | 渲染添加星座表单HTML | 需登录 |
| `/constellations/add` | POST | 添加星座 | 表单参数：<br>- `name`：星座名称（必填） | 添加成功跳转至列表页；失败返回带错误信息的表单页 | 需登录（已移除“计划卫星数量”字段） |
| `/constellations/import/<int:constellation_id>` | GET | 访问卫星导入页面 | 路径参数：<br>- `constellation_id`：星座ID | 渲染导入卫星表单HTML | 需登录（仅允许导入自己星座的卫星） |
| `/constellations/import/<int:constellation_id>` | POST | 导入卫星数据 | 路径参数：<br>- `constellation_id`：星座ID<br>文件参数：<br>- `satellite_file`：卫星数据TXT文件（必填，格式：每3行1个卫星，含ID） | 导入完成后跳转至星座详情页，返回成功/失败数量 | 需登录（仅允许导入自己星座的卫星），自动去重 |
| `/constellations/export` | GET | 访问星座导出页面 | 无 | 渲染导出星座选择表单HTML | 需登录 |
| `/constellations/export` | POST | 导出星座数据 | 表单参数：<br>- `constellation_ids`：选中的星座ID列表（必填） | 返回ZIP文件，包含：<br>- `tles.txt`：卫星信息（每行格式：星座名称 卫星ID、信息行1、信息行2）<br>- `isls.txt`：卫星关联（每行格式：偏移后卫星ID1 偏移后卫星ID2） | 需登录（仅允许导出自己的星座），偏移量为前序星座卫星总数 |


### 五、卫星管理接口（`/satellites`）
| 路径 | 方法 | 功能描述 | 请求参数 | 响应 | 备注 |
|------|------|----------|----------|------|------|
| `/satellites` | GET | 查看卫星列表 | 无 | 渲染当前用户的卫星列表HTML | 需登录（仅显示当前用户数据） |
| `/satellites/<int:id>` | GET | 查看卫星详情 | 路径参数：<br>- `id`：卫星ID | 渲染卫星详情（含所属星座、信息及关联卫星） | 需登录（仅允许查看自己的卫星） |
| `/satellites/add` | GET | 访问添加卫星页面 | 无 | 渲染添加卫星表单HTML（含星座选择） | 需登录 |
| `/satellites/add` | POST | 添加卫星 | 表单参数：<br>- `constellation_id`：所属星座ID（必填）<br>- `satellite_id`：卫星编号（必填，≥1，同星座内唯一）<br>- `info_line1`：信息行1（必填，多行文本）<br>- `info_line2`：信息行2（必填，多行文本） | 添加成功跳转至卫星列表；失败返回带错误信息的表单页 | 需登录 |
| `/satellites/<int:id>/edit` | GET | 访问编辑卫星页面 | 路径参数：<br>- `id`：卫星ID | 渲染编辑卫星表单（含当前数据） | 需登录（仅允许编辑自己的卫星） |
| `/satellites/<int:id>/edit` | POST | 编辑卫星 | 路径参数：<br>- `id`：卫星ID<br>表单参数：<br>- `constellation_id`：所属星座ID（必填）<br>- `satellite_id`：卫星编号（必填，≥1，同星座内唯一）<br>- `info_line1`：信息行1（必填，多行文本）<br>- `info_line2`：信息行2（必填，多行文本） | 编辑成功跳转至卫星详情；失败返回带错误信息的表单页 | 需登录 |
| `/satellites/<int:id>/delete` | GET | 删除卫星 | 路径参数：<br>- `id`：卫星ID | 删除后跳转至卫星列表（关联关系同步删除） | 需登录（仅允许删除自己的卫星） |
| `/satellites/constellation/<int:id>` | GET | 获取指定星座下的卫星 | 路径参数：<br>- `id`：星座ID | 返回JSON数组，格式：`[{"id": 卫星ID, "satellite_id": 卫星编号}, ...]` | 需登录（仅返回自己星座的卫星），用于前端动态加载卫星列表 |
| `/satellites/links/add` | GET | 访问添加卫星关联页面 | 无 | 渲染添加关联表单（含星座选择） | 需登录 |
| `/satellites/links/add` | POST | 添加卫星关联 | 表单参数：<br>- `constellation_id`：星座ID（必填，关联卫星需属于同一星座）<br>- `satellite_id1`：卫星1 ID（必填）<br>- `satellite_id2`：卫星2 ID（必填，需与卫星1不同） | 添加成功跳转至星座详情页；失败返回带错误信息的表单页 | 需登录，关联不可重复（双向去重） |
| `/satellites/links/import` | GET | 访问导入卫星关联页面 | 无 | 渲染导入关联表单（含星座选择） | 需登录 |
| `/satellites/links/import` | POST | 导入卫星关联 | 表单参数：<br>- `constellation_id`：星座ID（必填）<br>文件参数：<br>- `link_file`：关联数据TXT文件（必填，格式：每行“卫星ID 卫星ID”，空格分隔） | 导入完成后跳转至星座详情页，返回成功/失败数量 | 需登录（仅允许导入自己星座的关联） |
| `/satellites/delete_link/<int:id>` | GET | 删除卫星关联 | 路径参数：<br>- `id`：关联关系ID | 删除后跳转至卫星详情页 | 需登录（仅允许删除自己星座的关联） |


### 通用说明
1. **权限控制**：所有带`@login_required`的接口均需登录（通过session验证），且仅允许操作当前登录用户（`g.user`）创建的数据。
2. **数据验证**：表单提交均需验证必填项，重复数据（如同名基座、同星座内重复卫星编号）会返回错误提示。
3. **文件格式**：
   - 卫星导入文件（TXT）：每3行1个卫星，包含卫星ID、信息行1、信息行2
   - 卫星关联导入文件（TXT）：每行包含两个卫星ID（空格分隔），需属于同一星座
4. **分页**：卫星列表默认每页20条，通过`page`参数控制。
5. **响应格式**：页面类接口返回HTML，数据接口（如`/satellites/constellation/<int:id>`）返回JSON。